
#ifndef block_net_TDSCDMA_DnLink
#define block_net_TDSCDMA_DnLink
define TDSCDMA_DPCH ( _net236  _net250  _net238  _net239  _net242 ) 
parameters  SlotIndex=2  MidambleAllocScheme=2  BasicMidambleID=0  K=16  MidambleID=1  SpreadFactor=16  SpreadCode=1  PhyChNum=1  Link=0  ModType=0  N_TFCI=0  N_SS_N_TPC=0 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fMidamble_lsdftdscdmastars:T6  _net282 MidambleAllocScheme=MidambleAllocScheme BasicMidambleID=BasicMidambleID K=K MidambleID=MidambleID SpreadFactor=SpreadFactor SpreadCode=SpreadCode PhyChNum=PhyChNum 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fScramble_lsdftdscdmastars:T3  _net280 ScrambleCode=BasicMidambleID 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fOVSF_lsdftdscdmastars:T4  _net280 SpreadFactor=SpreadFactor SpreadCode=SpreadCode 

gain=if (MidambleAllocScheme = 1) then 1.0/sqrt(PhyChNum) else 1 endif
_vAgilentEEsof_dSDF_nGainCx_lsdfstars:G1  _net282 _net271 Gain=gain 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fBurstMux_lsdftdscdmastars:T2  _net246 _net271 _net248 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fModulator_lsdftdscdmastars:T5  _net244 _net245 ModType=ModType 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fOnePhyCh_lsdftdscdmastars:T7  _net248 _net242 SlotIndex=SlotIndex 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fDPCH_x5fDataMux_lsdftdscdmastars:T1  _net236 _net250 _net238 _net239 _net244 Link=Link SpreadFactor=SpreadFactor ModType=ModType N_TFCI=N_TFCI N_SS_N_TPC=N_SS_N_TPC 
_vAgilentEEsof_dSDF_nRepeat_lsdfstars:R1  _net245 _net280 NumTimes=SpreadFactor BlockSize=1 
_vAgilentEEsof_dSDF_nMpyCx_lsdfstars:M2  _net280 _net246 
end TDSCDMA_DPCH
define AddCx2 ( _net11  _net10  _net13 ) 
;parameters 
_vAgilentEEsof_dHOF_nNop_lhofstars_pinput_x3d2_aBusMerge2:B1  _net11 _net10 _net5 
_vAgilentEEsof_dSDF_nAddCx_lsdfstars:A1  _net5 _net13 
end AddCx2
define RF_ModulatorRC ( _net30  _net34  _net32 ) 
parameters  ROut=DefaultROut  RTemp=DefaultRTemp  FCarrier=1900 MHz  Power=0.01 W  VRef=1 V  SymbolRate=25e3  SampPerSym=8  FilterLength=16  ExcessBW=0.35  SquareRoot=1  MirrorSpectrum=0  GainImbalance=0.0  PhaseImbalance=0.0  I_OriginOffset=0.0  Q_OriginOffset=0.0  IQ_Rotation=0.0 

TStep=if ( SymbolRate>0 && SampPerSym>0 ) then (1 / SymbolRate / SampPerSym) else ( 0 ) endif
I_Gain=if ( Length == 1 ) then ( if ( SquareRoot == 1 ) then ( 1 / ( 4*ExcessBW/pi + 1 - ExcessBW ) ) else ( 1 ) endif ) else ( if ( SquareRoot == 1 ) then sqrt(SampPerSym) else sqrt( 1 + 0.3 * ExcessBW ) endif ) endif
Q_Gain=if ( MirrorSpectrum == 0 ) then I_Gain else ( -I_Gain ) endif
Length=2 * int( FilterLength * SampPerSym / 2 ) + 1
Offset=( I_OriginOffset + j * Q_OriginOffset ) * sqrt( 2 * ROut * Power ) / 100
_vAgilentEEsof_dSDF_nGain_lsdfstars:G6  _net14 _net23 Gain=I_Gain 
_vAgilentEEsof_dSDF_nGain_lsdfstars:G5  _net36 _net21 Gain=Q_Gain 
_vAgilentEEsof_dTSDF_nFloatToTimed_ltsdfstars:F1  _net23 _net31 TStep=TStep 
_vAgilentEEsof_dTSDF_nFloatToTimed_ltsdfstars:F2  _net21 _net33 TStep=TStep 
_vAgilentEEsof_dTSDF_nConstTimed_ltsdfstars:C3  _net29 TStep=TStep FCarrier=FCarrier Hz Value=Offset 
_vAgilentEEsof_dSDF_nRaisedCosine_lsdfdspstars:R5  _net34 _net36 Decimation=1 DecimationPhase=0 Interpolation=SampPerSym Length=Length SymbolInterval=SampPerSym ExcessBW=ExcessBW SquareRoot=SquareRoot 
_vAgilentEEsof_dSDF_nRaisedCosine_lsdfdspstars:R6  _net30 _net14 Decimation=1 DecimationPhase=0 Interpolation=SampPerSym Length=Length SymbolInterval=SampPerSym ExcessBW=ExcessBW SquareRoot=SquareRoot 
_vAgilentEEsof_dTSDF_n_x5fQAM_x5fMod_ltsdfstars:Q1  _net31 _net33 _net8 RIn=50.0 Ohm ROut=ROut Ohm RTemp=-273.15 FCarrier=FCarrier Hz Power=Power W VRef=4*VRef Phase=0 GainImbalance=GainImbalance PhaseImbalance=PhaseImbalance 
_vAgilentEEsof_dTSDF_n_x5fPhaseShiftRF_ltsdfstars:P1  _net8 _net6 RIn=ROut Ohm ROut=ROut Ohm RTemp=-273.15 PhaseShift=IQ_Rotation 
_vAgilentEEsof_dTSDF_n_x5fSummerRF_ltsdfstars:S1  _net29 _net6 _net4 RIn=ROut Ohm ROut=ROut Ohm RTemp=-273.15 FcOut=2 
R:R2  _net4 _net32 R=ROut Temp=RTemp 
end RF_ModulatorRC
define TDSCDMA_DL_Src ( _net715  _net716  _net717  _net613  _net596 ) 
parameters  SlotIndex=6  MidambleAllocScheme=2  BasicMidambleID=0  K=16  MidambleID1=1  MidambleID2=2  SpreadCode1=1  SpreadCode2=2  PhyChNum=2 
TDSCDMA_DPCH:T2  _net724 _net720 _net721 _net722 _net725 SlotIndex=SlotIndex MidambleAllocScheme=MidambleAllocScheme BasicMidambleID=BasicMidambleID K=K MidambleID=MidambleID2 SpreadFactor=16 SpreadCode=SpreadCode2 PhyChNum=PhyChNum Link=0 ModType=0 N_TFCI=0 N_SS_N_TPC=0 
TDSCDMA_DPCH:T1  _net714 _net715 _net716 _net717 _net718 SlotIndex=SlotIndex MidambleAllocScheme=MidambleAllocScheme BasicMidambleID=BasicMidambleID K=K MidambleID=MidambleID1 SpreadFactor=16 SpreadCode=SpreadCode1 PhyChNum=PhyChNum Link=0 ModType=0 N_TFCI=16 N_SS_N_TPC=2 
_vAgilentEEsof_dHOF_nNop_lhofstars_poutput_x3d2_aBusSplit2:B4  _net613 _net714 _net724 
AddCx2:A1  _net718 _net725 _net596 
end TDSCDMA_DL_Src
define TDSCDMA_DwPCH ( _net204 ) 
parameters  SyncCode=0  ModPhase=0 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fSync_lsdftdscdmastars:T2  _net205 LinkDir=0 SyncCode=SyncCode ModPhase=ModPhase 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fCombiner_lsdftdscdmastars:T4  _net202 _net203 _net204 BlockSize1=864+32+64 BlockSize2=96+160+864*6 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fCombiner_lsdftdscdmastars:T3  _net199 _net205 _net202 BlockSize1=864+32 BlockSize2=64 
_vAgilentEEsof_dSDF_nConstCx_lsdfstars:C4  _net203 Real=0.0 Imag=0.0 
_vAgilentEEsof_dSDF_nConstCx_lsdfstars:C3  _net199 Real=0.0 Imag=0.0 
end TDSCDMA_DwPCH
define Bits ( _net31 ) 
parameters  Type=0  ProbOfZero=0.5  LFSR_Length=12  LFSR_InitState=1 
_vAgilentEEsof_dSDF_nQuant_lsdfstars:Q14  _net94 _net95 Thresholds="Thresholds" Levels="" 
_vAgilentEEsof_dSDF_nFloatToInt_lsdfstars:F14  _net96 _net97 
_vAgilentEEsof_dSDF_nIID_x5fUniform_lsdfstars:I7  _net93 Lower=0.0 Upper=1.0 
_vAgilentEEsof_dHOF_nIfElse_lhofstars:I5  _net68 _net99 _net95 _net98 _net63 _net94 Condition=int( Type ) 
_vAgilentEEsof_dSDF_nLFSR_lsdfomnistars:L1  _net98 _net99 Seed="LFSR_Seed" FeedbackList="List" 

Thresholds=if ( ProbOfZero <= 0 ) then "-1.0" elseif ( ProbOfZero >= 1 ) then "2.0" else "ProbOfZero" endif

L=if ( ( LFSR_Length > 1 ) && ( LFSR_Length < 32 ) ) then LFSR_Length else 12 endif
LFSR_Seed=if ( ( LFSR_InitState > 0 ) && ( LFSR_InitState < 2**L ) ) then LFSR_InitState else 1 endif
List=if (L<=9) then List1 elseif (L<=17) then List2 elseif (L<=25) then List3 else List4 endif
List1=if (L==2) then L2 elseif (L==3) then L3 elseif (L==4) then L4 elseif (L==5) then L5 elseif (L==6) then L6 elseif (L==7) then L7 elseif (L==8) then L8 else L9 endif
List2=if (L==10) then L10 elseif (L==11) then L11 elseif (L==12) then L12 elseif (L==13) then L13 elseif (L==14) then L14 elseif (L==15) then L15 elseif (L==16) then L16 else L17 endif
List3=if (L==18) then L18 elseif (L==19) then L19 elseif (L==20) then L20 elseif (L==21) then L21 elseif (L==22) then L22 elseif (L==23) then L23 elseif (L==24) then L24 else L25 endif
List4=if (L==26) then L26 elseif (L==27) then L27 elseif (L==28) then L28 elseif (L==29) then L29 elseif (L==30) then L30 else L31 endif
List5=if (L==2) then L2 elseif (L==3) then L3 elseif (L==4) then L4 elseif (L==5) then L5 elseif (L==6) then L6 elseif (L==7) then L7 elseif (L==8) then L8 elseif (L==9) then L9 elseif (L==10) then L10 elseif (L==11) then L11 elseif (L==12) then L12 elseif (L==13) then L13 elseif (L==14) then L14 elseif (L==15) then L15 elseif (L==16) then L16 elseif (L==17) then L17 elseif (L==18) then L18 elseif (L==19) then L19 elseif (L==20) then L20 elseif (L==21) then L21 elseif (L==22) then L22 elseif (L==23) then L23 elseif (L==24) then L24 elseif (L==25) then L25 elseif (L==26) then L26 elseif (L==27) then L27 elseif (L==28) then L28 elseif (L==29) then L29 elseif (L==30) then L30 else L31 endif

L2="2 1"
L3="3 1"
L4="4 1"
L5="5 2"
L6="6 1"
L7="7 1"
L8="8 5 3 1"

L9="9 4"
L10="10 3"
L11="11 7 3 2"
L12="12 6 4 1"
L13="13 4 3 1"
L14="14 12 2 1"
L15="15 1"

L16="16 12 3 1"
L17="17 3"
L18="18 7"
L19="19 5 2 1"
L20="20 3"
L21="21 2"
L22="22 1"

L23="23 5"
L24="24 7 2"
L25="25 3"
L26="26 6 2 1"
L27="27 5 2 1"
L28="28 3"
L29="29 2"
L30="30 23 2 1"
L31="31 3"
_vAgilentEEsof_dHOF_nIfElse_lhofstars:I4  _net32 _net36 _net93 _net35 _net37 _net33 Condition=int( Type ) 
_vAgilentEEsof_dHOF_nBus_lhofstars:B2  _net63 _net19 BusWidth=1 
_vAgilentEEsof_dHOF_nIfElse_lhofstars:I6  _net19 _net29 _net97 _net23 _net25 _net96 Condition=int( Type ) 
_vAgilentEEsof_dHOF_nBus_lhofstars:B3  _net25 _net31 BusWidth=1 
_vAgilentEEsof_dSDF_nDownSample_lsdfstars:D1  _net23 _net29 Factor=2 Phase=0 
_vAgilentEEsof_dHOF_nBus_lhofstars:B1  _net37 _net68 BusWidth=1 
_vAgilentEEsof_dSDF_nImpulseFloat_lsdfstars:R1  _net36 Level=1.0 Period=2 Delay=1 
end Bits
define TDSCDMA_DnLinkRF ( _net1768  _net1703  _net1706 ) 
parameters  ROut=DefaultROut  RTemp=DefaultRTemp    FCarrier=1900 MHz  Power=0.01  MirrorSpectrum=0  GainImbalance=0.0  PhaseImbalance=0.0  I_OriginOffset=0.0  Q_OriginOffset=0.0  IQ_Rotation=0.0  SamplesPerChip=8  RRC_FilterLength=12  ModPhase=0  MidambleAllocScheme=1  BasicMidambleID=0  MidambleID1=1  MidambleID2=2  MaxMidambleShift=16  SpreadCode1=1  SpreadCode2=2  DwPCH_Gain=1  DownlinkPilotCode=0  ActiveTimeslot=5 
RF_ModulatorRC:R8  I Q _net1768 ROut=ROut RTemp=RTemp FCarrier=FCarrier Power=Power VRef=sqrt(2) V SymbolRate=1.28e6 SampPerSym=SamplesPerChip FilterLength=RRC_FilterLength ExcessBW=0.22 SquareRoot=1 MirrorSpectrum=MirrorSpectrum GainImbalance=GainImbalance dB PhaseImbalance=PhaseImbalance I_OriginOffset=I_OriginOffset Q_OriginOffset=Q_OriginOffset IQ_Rotation=IQ_Rotation 

ActiveSlot=if(ActiveTimeslot=0) then 0 else ActiveTimeslot+1 endif
TDSCDMA_DL_Src:T5  _net1758 p2 p3 p4 _net1762 SlotIndex=ActiveSlot MidambleAllocScheme=MidambleAllocScheme BasicMidambleID=BasicMidambleID K=MaxMidambleShift MidambleID1=MidambleID1 MidambleID2=MidambleID2 SpreadCode1=SpreadCode1 SpreadCode2=SpreadCode2 PhyChNum=2 
_vAgilentEEsof_dSDF_nCxToRect_lsdfstars:C1  _net1710 I Q 
_vAgilentEEsof_dSDF_nRepeat_lsdfstars:R6  Q _net1706 NumTimes=SamplesPerChip BlockSize=1 
_vAgilentEEsof_dSDF_nRepeat_lsdfstars:R7  I _net1703 NumTimes=SamplesPerChip BlockSize=1 
_vAgilentEEsof_dTSDF_nTDSCDMA_x5fDnLinkRF_x5fRangeCheck_lsdftdscdmahstars:T9  
TDSCDMA_DwPCH:T7  _net1487 SyncCode=DownlinkPilotCode ModPhase=ModPhase 
_vAgilentEEsof_dSDF_nTDSCDMA_x5fTFCI_x5fEncoder_lsdftdscdmastars:T8  p1 _net1758 _net1420 TFCICoding=1 
_vAgilentEEsof_dSDF_nConstInt_lsdfstars:C2  p1 Level=10 
Bits:B3  p2 Type=0 ProbOfZero=0.5 LFSR_Length=12 LFSR_InitState=1 
Bits:B1  q1 Type=0 ProbOfZero=0.5 LFSR_Length=12 LFSR_InitState=1 
Bits:B5  q2 Type=0 ProbOfZero=0.5 LFSR_Length=12 LFSR_InitState=1 
_vAgilentEEsof_dSDF_nGainCx_lsdfstars:G1  _net1487 _net573 Gain=DwPCH_Gain 
AddCx2:A1  _net1762 _net573 _net1710 
_vAgilentEEsof_dHOF_nNop_lhofstars_pinput_x3d2_aBusMerge2:B6  q1 q2 p4 
Bits:B2  p3 Type=0 ProbOfZero=0.5 LFSR_Length=12 LFSR_InitState=1 
end TDSCDMA_DnLinkRF
define TDSCDMA_DnLink ( _net93  _net11  _net94  _net95 ) 
parameters  Num=1  R=50 Ohm  Temp=  Noise=1    FCarrier=1900 MHz  Power=0.01  MirrorSpectrum=0  GainImbalance=0.0  PhaseImbalance=0.0  I_OriginOffset=0.0  Q_OriginOffset=0.0  IQ_Rotation=0.0  SamplesPerChip=8  RRC_FilterLength=12  ModPhase=0  MidambleAllocScheme=1  BasicMidambleID=0  MidambleID1=1  MidambleID2=2  MaxMidambleShift=16  SpreadCode1=1  SpreadCode2=2  DwPCH_Gain=1  DownlinkPilotCode=0  ActiveTimeslot=5 
TDSCDMA_DnLinkRF:DSP  _net93 _net94 _net95 ROut=50 RTemp=-273.15 FCarrier=FCarrier Power=Power MirrorSpectrum=MirrorSpectrum GainImbalance=GainImbalance dB PhaseImbalance=PhaseImbalance I_OriginOffset=I_OriginOffset Q_OriginOffset=Q_OriginOffset IQ_Rotation=IQ_Rotation SamplesPerChip=SamplesPerChip RRC_FilterLength=RRC_FilterLength ModPhase=ModPhase MidambleAllocScheme=MidambleAllocScheme BasicMidambleID=BasicMidambleID MidambleID1=MidambleID1 MidambleID2=MidambleID2 MaxMidambleShift=MaxMidambleShift SpreadCode1=SpreadCode1 SpreadCode2=SpreadCode2 DwPCH_Gain=DwPCH_Gain DownlinkPilotCode=DownlinkPilotCode ActiveTimeslot=ActiveTimeslot 
Component:TDSCDMA_DnLink  Module="DSPSource" Type="ModelExtractor" P[1]=Power Z[1]=R CarrierFrequency[1]=FCarrier Noise[1]=Noise Temp[1]=Temp Num[1]=Num NodeMapping[1]="RF 1 2 RF" NodeMapping[2]="BB 3 2 I" NodeMapping[3]="BB 4 2 Q" 
end TDSCDMA_DnLink

#endif
